(this["webpackJsonplista-casa-nova"]=this["webpackJsonplista-casa-nova"]||[]).push([[0],{18:function(t,e,s){},20:function(t,e,s){},30:function(t,e,s){"use strict";s.r(e);var a=s(1),n=s.n(a),i=s(13),r=s.n(i),c=(s(18),s(2)),o=s.n(c),d=s(7),u=s(8),p=s(9),h=s(11),l=s(10),v=(s(20),s(0)),j=s(22),m=s(27),f=function(t){Object(h.a)(s,t);var e=Object(l.a)(s);function s(t){var a;return Object(u.a)(this,s),(a=e.call(this,t)).store=new j("https://api.steinhq.com/v1/storages/618d988dc582292380b45370"),a.state={wishes:[]},a.getData(),a}return Object(p.a)(s,[{key:"getData",value:function(){var t=Object(d.a)(o.a.mark((function t(){var e=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.read("Wishes").then((function(t){e.setState({wishes:t.map((function(t){return{id:parseInt(t.ID),name:t.ITEM,dsp:parseInt(t.DISPONIVEL),qty:parseInt(t.QUANTIDADE),cod:JSON.parse(t.COD),status:Boolean(parseInt(t.STATUS)),img:t.IMG}}))}),console.log(e.state)}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updateWish",value:function(){var t=Object(d.a)(o.a.mark((function t(e,s,a,n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.edit("Wishes",{search:{ID:e.toString()},set:{STATUS:parseInt(s),COD:JSON.stringify(a),DISPONIVEL:n}}).then((function(t){console.log(t)}));case 2:case"end":return t.stop()}}),t,this)})));return function(e,s,a,n){return t.apply(this,arguments)}}()},{key:"arrayRemove",value:function(t,e){return t.filter((function(t){return t!==e}))}},{key:"addWish",value:function(t){var e=Object.assign({},this.state),s=m.find(e.wishes,{id:t});if(s.status){var a=window.prompt("Digite um c\xf3digo de seguran\xe7a caso queira cancelar a reserva depois:","");a?(1===s.dsp&&(s.status=!s.status),s.dsp-=1,s.cod.push(parseInt(a)),this.setState(e),this.updateWish(parseInt(t),s.status?1:0,s.cod,s.dsp)):""===a&&window.alert("Precisa digitar um c\xf3digo v\xe1lido!")}else{var n=window.prompt("Digite um c\xf3digo de seguran\xe7a para cancelar a reserva:","");n&&s.cod.includes(parseInt(n))?(s.status=!s.status,s.dsp+=1,s.cod=this.arrayRemove(s.cod,parseInt(n)),this.setState(e),this.updateWish(parseInt(t),s.status?1:0,s.cod,s.dsp)):window.alert("Codigo inv\xe1lido!")}}},{key:"removeWish",value:function(t){var e=Object.assign({},this.state),s=m.find(e.wishes,{id:t}),a=window.prompt("Digite um c\xf3digo de seguran\xe7a para cancelar a reserva:","");a&&s.cod.includes(parseInt(a))?(s.dsp+=1,s.cod=this.arrayRemove(s.cod,parseInt(a)),this.setState(e),this.updateWish(parseInt(t),s.status?1:0,s.cod,s.dsp)):window.alert("Codigo inv\xe1lido!")}},{key:"render",value:function(){var t=this;return Object(v.jsx)(O,{wishes:this.state.wishes,addWish:function(e){return t.addWish(e)},removeWish:function(e){return t.removeWish(e)}})}}]),s}(n.a.Component),O=function(t){Object(h.a)(s,t);var e=Object(l.a)(s);function s(){return Object(u.a)(this,s),e.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){var t=this,e=this.props.wishes.map((function(e){return Object(v.jsxs)("li",{className:e.status&&e.dsp>0?"card notactive":"card active",children:[e.status&&e.dsp>0?"":Object(v.jsx)("div",{className:"card-warn",children:Object(v.jsx)("span",{children:"RESERVADO"})}),Object(v.jsxs)("span",{className:"absolute-qtd",children:[e.dsp," disponivel"]}),Object(v.jsx)("img",{className:"card-img",src:e.img,alt:""}),Object(v.jsx)("div",{className:"div-name",children:Object(v.jsx)("span",{className:"card-name",children:e.name})}),e.dsp<e.qty&&0!==e.dsp?Object(v.jsx)("button",{onClick:function(){return t.props.removeWish(e.id)},children:"REMOVER RESERVA"}):"",Object(v.jsx)("button",{onClick:function(){return t.props.addWish(e.id)},children:e.status&&e.dsp>0?"RESERVAR":"REMOVER RESERVA"})]},e.id)}));return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("ul",{className:"wish-list",children:e})})}}]),s}(n.a.Component),b=f;r.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(b,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.7a4cacea.chunk.js.map