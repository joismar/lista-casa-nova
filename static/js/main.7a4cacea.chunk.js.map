{"version":3,"sources":["App.js","index.js"],"names":["SteinStore","require","_","App","props","store","state","wishes","getData","a","this","read","then","data","setState","map","id","parseInt","ID","name","ITEM","dsp","DISPONIVEL","qty","QUANTIDADE","cod","JSON","parse","COD","status","Boolean","STATUS","img","IMG","console","log","wishId","res","edit","search","toString","set","stringify","arr","value","filter","ele","newState","Object","assign","wish","find","window","prompt","push","updateWish","alert","includes","arrayRemove","addWish","removeWish","React","Component","SingleWish","listItem","className","src","alt","onClick","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7a4cacea.chunk.js","sourcesContent":["import './App.css';\nimport React from 'react'; \nconst SteinStore = require(\"stein-js-client\");\nvar _ = require('lodash');\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.store = new SteinStore(\n      \"https://api.steinhq.com/v1/storages/618d988dc582292380b45370\"\n    );\n    this.state = {\n      wishes: []\n    }; \n    this.getData();\n  }\n  \n  async getData() {\n    await this.store.read(\"Wishes\").then(data => {\n      this.setState({\n        wishes: data.map(data => ({\n          id: parseInt(data.ID),\n          name: data.ITEM,\n          dsp: parseInt(data.DISPONIVEL),\n          qty: parseInt(data.QUANTIDADE),\n          cod: JSON.parse(data.COD),\n          status: Boolean(parseInt(data.STATUS)),\n          img: data.IMG\n        }))\n      });\n      console.log(this.state);\n    });\n  }\n  \n  async updateWish(wishId, status, res, dsp) {\n    await this.store.edit(\"Wishes\", {\n      search: { ID: wishId.toString() },\n      set: { STATUS: parseInt(status), COD: JSON.stringify(res), DISPONIVEL: dsp}\n    })\n      .then(res => {\n      console.log(res);\n    });\n  }\n  \n  arrayRemove(arr, value) { \n    return arr.filter(function(ele){ \n      return ele !== value; \n    });\n  }\n  \n  addWish(wishId) {\n    let newState = Object.assign({}, this.state)\n    let wish = _.find(newState.wishes, {id: wishId});\n    if (wish.status) {\n      let res = window.prompt(\"Digite um código de segurança caso queira cancelar a reserva depois:\", \"\");\n      if (res) {\n        if (wish.dsp === 1) {\n          wish.status = !wish.status\n        }\n        wish.dsp -= 1\n        wish.cod.push(parseInt(res))\n        this.setState(newState)\n        this.updateWish(parseInt(wishId), wish.status ? 1 : 0, wish.cod, wish.dsp)\n      } else if (res === \"\") {\n        window.alert(\"Precisa digitar um código válido!\");\n      }\n    } else {\n      let res = window.prompt(\"Digite um código de segurança para cancelar a reserva:\", \"\");\n      if (res && wish.cod.includes(parseInt(res))) {\n        wish.status = !wish.status\n        wish.dsp += 1\n        wish.cod = this.arrayRemove(wish.cod, parseInt(res))\n        this.setState(newState)\n        this.updateWish(parseInt(wishId), wish.status ? 1 : 0, wish.cod, wish.dsp)\n      } else {\n        window.alert(\"Codigo inválido!\");\n      }\n      // this.store.read(\"Wishes\", { search: { ID: wishId } }).then(data => {\n      //   if (data && data.length != 0) {\n      //     wish.status = !wish.status\n      //     wish.dsp += 1\n      //     this.setState(newState)\n      //     this.updateWish(parseInt(wishId), wish.status ? 1 : 0, \"\", wish.dsp)\n      //   } else {\n      //     window.alert(\"Codigo inválido!\");\n      //   }\n      // });\n    }\n  }\n  \n  removeWish(wishId) {\n    let newState = Object.assign({}, this.state)\n    let wish = _.find(newState.wishes, {id: wishId});\n    let res = window.prompt(\"Digite um código de segurança para cancelar a reserva:\", \"\");\n    if (res && wish.cod.includes(parseInt(res))) {\n      wish.dsp += 1\n      wish.cod = this.arrayRemove(wish.cod, parseInt(res))\n      this.setState(newState)\n      this.updateWish(parseInt(wishId), wish.status ? 1 : 0, wish.cod, wish.dsp)\n    } else {\n      window.alert(\"Codigo inválido!\");\n    }\n    // this.store.read(\"Wishes\", { search: { COD: res } }).then(data => {\n    //   if (data && data.length != 0) {\n    //     wish.dsp += 1\n    //     this.setState(newState)\n    //     this.updateWish(parseInt(wishId), wish.status ? 1 : 0, \"\", wish.dsp)\n    //   } else {\n    //     window.alert(\"Codigo inválido!\");\n    //   }\n    // });\n  }\n  \n  render() {\n    return (<SingleWish wishes={this.state.wishes} addWish={(wishId) => this.addWish(wishId)} removeWish={(wishId) => this.removeWish(wishId)} />);\n  }  \n}\n\nclass SingleWish extends React.Component  {\n  render() {  \n    const listItem = this.props.wishes.map((wish) => {\n      return (\n        <li className={!(wish.status && wish.dsp > 0) ? 'card active' : 'card notactive'} key={wish.id}>\n          {(wish.status && wish.dsp > 0) ? '' : <div className=\"card-warn\"><span>RESERVADO</span></div>}\n          <span className=\"absolute-qtd\">{wish.dsp} disponivel</span>\n          <img className=\"card-img\" src={wish.img} alt=\"\"/>\n          <div className=\"div-name\">\n            <span className=\"card-name\">{wish.name}</span>\n          </div>\n          {(wish.dsp < wish.qty && wish.dsp !== 0) ? <button onClick={() => this.props.removeWish(wish.id)}>REMOVER RESERVA</button> : ''}\n          <button onClick={() => this.props.addWish(wish.id)}>{(wish.status && wish.dsp > 0) ? 'RESERVAR' : 'REMOVER RESERVA'}</button>\n        </li>\n      );\n    })\n    \n    return (\n      <div className=\"container\">\n        <ul className=\"wish-list\">\n          { listItem }\n        </ul>\n      </div>\n      );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}